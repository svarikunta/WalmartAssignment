package com.walmart.test;



import java.util.ArrayList;
import java.util.List;

import org.junit.Assert;
import org.junit.Test;

import com.wallmart.service.TicketingService;
import com.wallmart.service.TicketingServiceImpl;
import com.wallmat.model.Custmore;
import com.wallmat.model.ResorvationRequest;
import com.wallmat.model.ResorvationResponse;
import com.wallmat.model.Seat;
import com.wallmat.model.Stage;


public class TestTickatingSystem {
	
	TicketingService ts= new TicketingServiceImpl();

	@Test
	public void TestfindAndHeldSeat() {
		
		
		ResorvationRequest request= new ResorvationRequest();
		ResorvationResponse response = null;
		Custmore cust = new Custmore("Sam",1);
		request.setCustmore(cust);
		request.setReqNumbOfSeats(5);
		request.setCustPreferedRow('B');
		ts.displayStage();
		response=ts.findAndHoldSeats(request);
		//System.out.println(response.isSucess());
		ts.displayStage();
		System.out.println(Stage.seatsAvilable.get());
		
		try {
			Thread.sleep(4000);
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		System.out.println(Stage.seatsAvilable.get());
	}
	
	@Test
	public void holdSeats(){
		
		ResorvationRequest request= new ResorvationRequest();
		ResorvationResponse response = null;
		Custmore cust = new Custmore("Sam",479569349);
		request.setCustmore(cust);
		List<Seat> custPreferdSeats= new ArrayList<Seat>();
		Seat st1 = new Seat('B', 7);
		custPreferdSeats.add(st1);
		Seat st2 = new Seat('C', 7);
		custPreferdSeats.add(st2);
		Seat st3 = new Seat('D', 7);
		custPreferdSeats.add(st3);
		Seat st4 = new Seat('E', 7);
		custPreferdSeats.add(st4);
		Seat st5 = new Seat('F', 7);
		custPreferdSeats.add(st5);
		request.setCustPreferdSeats(custPreferdSeats);
		ts.displayStage();
		response=ts.holdSeats(request);
		ts.displayStage();
		request.setSeatsHeld(response.getSeatsHeld());
		ts.reserveAndCommitSeats(request);
		ts.displayStage();
		
		
		
		
	}

}
