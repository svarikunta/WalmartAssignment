package com.wallmart.service;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;

import javax.swing.Timer;

import com.wallmat.model.Seat;
import com.wallmat.model.Stage;

public class HoldTimer {

	int holdTime = 1000;

	public void updateHedStatus(List<Seat> heldSeats) {

		ActionListener taskPerformer = new ActionListener() {
			public void actionPerformed(ActionEvent evt) {
				System.out.println("Inside timer");

				for (Seat st : heldSeats) {

					synchronized (this) {

						if (st.isHeld()) {
							st.setHeld(false);
							st.setAvilable(true);
							st.setCustmore(null);
							Stage.seatsAvilable.getAndIncrement();
						}
					}
				}
			}
		};

		Timer timer = new Timer(holdTime, taskPerformer);
		timer.setRepeats(false);
		timer.start();
	}

}
